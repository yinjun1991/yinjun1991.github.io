<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>移动端 H5 viewport | 写好代码</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="移动端 H5 viewport移动端页面大家都遇到过 viewport 的问题。关于 viewport 的文章有很多了，推荐给大家这两篇，写得非常详细。移动端适配方案(上)移动端适配方案(下) 本文对 viewport 做一些补充 手机屏幕手机屏幕属于硬件属性，我们无论是通过 JS 还是 meta 标签都是无法影响到它的。  手机屏幕物理像素，也就是手机厂商们说的像素、分辨率、PPI 这些。  安">
<meta property="og:type" content="article">
<meta property="og:title" content="移动端 H5 viewport">
<meta property="og:url" content="http://yinjun.github.io/2018/04/19/viewport/index.html">
<meta property="og:site_name" content="写好代码">
<meta property="og:description" content="移动端 H5 viewport移动端页面大家都遇到过 viewport 的问题。关于 viewport 的文章有很多了，推荐给大家这两篇，写得非常详细。移动端适配方案(上)移动端适配方案(下) 本文对 viewport 做一些补充 手机屏幕手机屏幕属于硬件属性，我们无论是通过 JS 还是 meta 标签都是无法影响到它的。  手机屏幕物理像素，也就是手机厂商们说的像素、分辨率、PPI 这些。  安">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-04-19T12:32:17.000Z">
<meta property="article:modified_time" content="2022-04-25T07:45:15.450Z">
<meta property="article:author" content="yinjun">
<meta property="article:tag" content="viewport">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="写好代码" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">写好代码</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一个平庸程序员的博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yinjun.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-viewport" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/19/viewport/" class="article-date">
  <time class="dt-published" datetime="2018-04-19T12:32:17.000Z" itemprop="datePublished">2018-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      移动端 H5 viewport
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="移动端-H5-viewport"><a href="#移动端-H5-viewport" class="headerlink" title="移动端 H5 viewport"></a>移动端 H5 viewport</h1><p>移动端页面大家都遇到过 viewport 的问题。关于 viewport 的文章有很多了，推荐给大家这两篇，写得非常详细。<br><a target="_blank" rel="noopener" href="https://github.com/riskers/blog/issues/17">移动端适配方案(上)</a><br><a target="_blank" rel="noopener" href="https://github.com/riskers/blog/issues/18">移动端适配方案(下)</a></p>
<p>本文对 viewport 做一些补充</p>
<h3 id="手机屏幕"><a href="#手机屏幕" class="headerlink" title="手机屏幕"></a>手机屏幕</h3><p>手机屏幕属于硬件属性，我们无论是通过 JS 还是 meta 标签都是无法影响到它的。</p>
<ul>
<li>手机屏幕物理像素，也就是手机厂商们说的像素、分辨率、PPI 这些。</li>
</ul>
<p>安卓常见的有 720X1280 , 1080X1920 等等<br>iPhone 则是 iPhone5 640X1136，iPhone6 750X1334，iPhone6P 1080X1920</p>
<ul>
<li>手机屏幕逻辑像素，物理像素经过折算之后的像素数。也就是<strong>理想视口</strong>的尺寸</li>
</ul>
<p>iPhone5 屏幕本来是 640px 宽，但是折算成了 <strong>320px</strong><br>iPhone6 物理像素 750px 款，折算成 <strong>375px</strong><br>iPhone6P 略微奇葩一点，物理像素实际 1080px 宽，但是系统向外暴露的确是 1242px，再折算成了 <strong>414px</strong></p>
<p><code>screen.width/height</code> 可以获取屏幕的逻辑像素</p>
<h3 id="布局视口-layout-viewport"><a href="#布局视口-layout-viewport" class="headerlink" title="布局视口 layout viewport"></a>布局视口 layout viewport</h3><p>刚才讲过的屏幕物理像素和逻辑像素，这些都是手机厂商设置好的，我们是无法设置的，重点再与接下来的两个视口，大家千万别混淆了。</p>
<p>layout viewport 相当于浏览器的宽度。<br>我们是可以通过 <meta name="viewport" content="width=XXX">设置的。<br>默认情况下，layout viewport 一般为 980px 宽。</p>
<p><code>document.documentElement.clientWidth</code> 可以获取 layout viewport 的宽度。</p>
<h3 id="视觉视口-visual-viewport"><a href="#视觉视口-visual-viewport" class="headerlink" title="视觉视口 visual viewport"></a>视觉视口 visual viewport</h3><p>视觉视口可以看作是手机屏幕这么大的一个窗口，但是它能显示的像素个数却不是屏幕上面的这么多逻辑像素。</p>
<p>视觉视口不太容易理解，虽然手机屏幕的逻辑像素已经固定了，比如 iPhone5 是 320px。</p>
<p>但是屏幕这 320px 宽，却可以显示 980px 宽的内容，所以视觉窗口的宽度是 980px。<br>很多没有对移动端做适配的网页，我们用手机打开，发现网页被缩小到手机屏幕这么宽了。</p>
<p>重点就在于缩放，缩放让 320px 的屏幕能显示更多内容了。<br><code>window.innerWidth</code> 可以获取 visual viewport 的宽度。</p>
<p>通过 <meta name="viewport" content="initial-scale=x"> 可以设置 visual viewport 的宽度。<br>visual viewport 的宽度为 <code>screen.width / initial-scale</code><br>同时，也会影响到 布局视口 的宽度，因为布局视口的宽度始终大于等于 visual layout 的宽度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果不设置 initial-scale ，iOS设备会自动将 visual viewport 缩放到 布局视口一样大。</span><br></pre></td></tr></table></figure>

<p>还记得默认的 布局视口 是多宽吗？</p>
<h3 id="屏幕逻辑像素、布局视口、视觉视口-三者的关系"><a href="#屏幕逻辑像素、布局视口、视觉视口-三者的关系" class="headerlink" title="屏幕逻辑像素、布局视口、视觉视口 三者的关系"></a>屏幕逻辑像素、布局视口、视觉视口 三者的关系</h3><meta name="viewport" content="width=device-width">

<p>将 layout viewport 的宽度设置为 屏幕宽</p>
<meta name="viewport" content="width=640">

<p>将 layout viewport 宽度设置为 640px （逻辑像素，而不是物理像素）</p>
<meta name="viewport" content="initial-scale=0.5">

<p>将 visual viewport 设置为 屏幕宽度的 2 倍（正确的理解是：visual viewport 的 0.5 倍是屏幕宽度，所以 visual viewport 的宽度就是屏幕的 2 倍了）</p>
<p>此时 布局视口的宽度也是 屏幕宽的 2 倍，而不再是默认的 980px 了</p>
<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、默认情况下 layout viewport 为 980px</span><br><span class="line">2、width=x 设置布局视口，initial-scale=y 设置视觉视口</span><br><span class="line">3、如果只设置 布局视口 和 视觉视口 中的一个，那么另一个也是同样的宽度</span><br><span class="line">4、布局视口 的宽度始终大于等于 视觉视口</span><br></pre></td></tr></table></figure>

<p>举例 iPhone 5 上面</p>
<meta name="viewport" content="width=600,initial-scale=0.5">

<p>那么视觉视口和布局视口分别是多宽呢？</p>
<p>最后的最后，终于到了我们耳熟能详的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>大家知道这是什么意思了吧。<br>layout viewport 浏览器窗口，设置为屏幕宽度。<br>visual viewport 也设置为屏幕宽度，不缩放，屏幕有多宽，就显示多少像素。<br>也就是所谓的完美视口。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yinjun.github.io/2018/04/19/viewport/" data-id="cl2ef05ls000e8mmte8iu8m9u" data-title="移动端 H5 viewport" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/viewport/" rel="tag">viewport</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/19/this/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          不一样的 this 问题
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome-extensions/" rel="tag">chrome,extensions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event-passive/" rel="tag">event,passive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/forever/" rel="tag">forever</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js-this/" rel="tag">js,this</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json-schema/" rel="tag">json,schema</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewport/" rel="tag">viewport</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vitejs-vite/" rel="tag">vitejs,vite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/chrome-extensions/" style="font-size: 10px;">chrome,extensions</a> <a href="/tags/event-passive/" style="font-size: 10px;">event,passive</a> <a href="/tags/forever/" style="font-size: 10px;">forever</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/js-this/" style="font-size: 10px;">js,this</a> <a href="/tags/json-schema/" style="font-size: 10px;">json,schema</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/viewport/" style="font-size: 10px;">viewport</a> <a href="/tags/vitejs-vite/" style="font-size: 10px;">vitejs,vite</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/19/articles/">好文集锦</a>
          </li>
        
          <li>
            <a href="/2022/04/19/chrome_extension/">chrome 插件开发入门</a>
          </li>
        
          <li>
            <a href="/2022/04/19/design_patterns/">设计模式</a>
          </li>
        
          <li>
            <a href="/2022/04/19/forever/">后台运行 NodeJS</a>
          </li>
        
          <li>
            <a href="/2022/04/19/git/">git 常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 yinjun<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>